CXXFLAGS 		:= -std=gnu++11 -Werror -Wall -pedantic -O3 -lrt
DEBUGFLAG 		:= -ggdb3
PROFILERFLAG 	:= -pg
PTHREAD 		:= -lpthread
LIBTIMER		:= -L. -ltimer
# CXXFLAGS += $(DEBUGFLAG)
# CXXFLAGS += $(PROFILERFLAG)

CXX 	 := g++
# BOOSTDIR := /usr/include/boost
# BOOSTFLAGS  := -lboost_system -lboost_thread -lboost_fiber

TARGETS 	:= rainfall_seq rainfall_pt
DEPENDENCY	:= landscape
OBJECTS 	:= $(TARGETS:=.o) landscape.o

.PHONY: all clean depend
all: $(TARGETS)

# $(TARGETS): %: %.o landscape.o
# 	$(CXX) $(CXXFLAGS) -o $@ $< landscape.o

rainfall_seq: rainfall_seq.o landscape.o
	$(CXX) $(CXXFLAGS) -o $@ $< landscape.o

rainfall_pt: rainfall_pt.o landscape.o
	$(CXX) $(CXXFLAGS) -o $@ $< landscape.o $(PTHREAD)

# rainfall_seq.o: rainfall_seq.cpp
# 	$(CXX) $(CXXFLAGS) -o $@ -c $<

# rainfall_pt.o: rainfall_pt.cpp
# 	$(CXX) $(CXXFLAGS) -o $@ -c $<

$(TARGETS:=.o): %.o: %.cpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

landscape.o: landscape.cpp
	$(CXX) $(CXXFLAGS) -o $@ -c $<

clean:
	rm -f *~ $(TARGETS) $(OBJECTS) test

depend:
	makedepend landscape.cpp $(TARGETS:=.cpp)

# Only for debug purpose
test: test.cpp landscape.cpp
	$(CXX) $(CXXFLAGS) -o test test.cpp landscape.cpp

# Generated by makedepend
landscape.o: landscape.hpp
